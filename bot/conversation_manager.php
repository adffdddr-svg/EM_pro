<?php
/**
 * Employee Management System
 * Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© - ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±
 */

if (!defined('ACCESS_ALLOWED')) {
    define('ACCESS_ALLOWED', true);
}

/**
 * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø£Ø®ÙŠØ±
 */
function getRecentConversation($employee_id, $limit = 3) {
    try {
        $db = getDB();
        $check_table = $db->query("SHOW TABLES LIKE 'bot_interactions'");
        if (!$check_table->fetch()) {
            return [];
        }
        
        $stmt = $db->prepare("SELECT user_message, bot_response FROM bot_interactions WHERE employee_id = ? ORDER BY created_at DESC LIMIT ?");
        $stmt->execute([$employee_id, $limit]);
        $history = $stmt->fetchAll(PDO::FETCH_ASSOC);
        
        return array_reverse($history);
    } catch (Exception $e) {
        return [];
    }
}

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø± ÙÙŠ Ø§Ù„Ø±Ø¯ÙˆØ¯
 */
function isRepeatedResponse($new_response, $employee_id) {
    $recent = getRecentConversation($employee_id, 3);
    
    foreach ($recent as $interaction) {
        $similarity = 0;
        similar_text($interaction['bot_response'], $new_response, $similarity);
        
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ´Ø§Ø¨Ù‡ Ø£ÙƒØ«Ø± Ù…Ù† 80%ØŒ ÙŠØ¹ØªØ¨Ø± Ù…ÙƒØ±Ø±
        if ($similarity > 80) {
            return true;
        }
    }
    
    return false;
}

/**
 * ØªÙˆÙ„ÙŠØ¯ Ø±Ø¯ Ù…ØªÙ†ÙˆØ¹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ù‚
 */
function generateVariedResponse($base_response, $context = []) {
    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø¯ Ù‚ØµÙŠØ±Ø§Ù‹ØŒ Ø£Ø¶Ù ØªÙ†ÙˆØ¹
    if (mb_strlen($base_response) < 50) {
        $variations = [
            "{$base_response} ğŸ˜Š",
            "{$base_response}\n\nØ´Ù†Ùˆ Ø¨Ø¹Ø¯ØŸ",
            "{$base_response}\n\nÙ‡Ù„ ØªØ­ØªØ§Ø¬ Ø´ÙŠØ¡ Ø«Ø§Ù†ÙŠØŸ",
            "{$base_response}\n\nØ£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ!",
        ];
        return $variations[array_rand($variations)];
    }
    
    return $base_response;
}

/**
 * Ø¥Ø¶Ø§ÙØ© Ø±Ø¯ÙˆØ¯ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¹Ø§Ø¯ÙŠØ©
 */
function addSmallTalk($message, $employee_id) {
    $message_lower = mb_strtolower(trim($message));
    $hour = (int)date('H');
    $day_name = date('l');
    
    // Ø±Ø¯ÙˆØ¯ Ø¹Ø§Ø¯ÙŠØ© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø¹Ø§Ù…Ø©
    $small_talk_responses = [
        // Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ø­Ø§Ù„
        'ÙƒÙŠÙÙƒ' => [
            "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø¨Ø®ÙŠØ±! Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ ğŸ˜Š\nØ´Ù„ÙˆÙ†Ùƒ Ø£Ù†ØªØŸ",
            "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ø£Ù†Ø§ Ø¨Ø®ÙŠØ±! Ø´ÙƒØ±Ø§Ù‹ ğŸ˜Š\nÙƒÙŠÙÙƒ Ø£Ù†ØªØŸ",
            "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø¨Ø®ÙŠØ±! Ø´ÙƒØ±Ø§Ù‹ ğŸ˜Š\nØ´Ù„ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ Ø¹Ù†Ø¯ÙƒØŸ"
        ],
        'ÙƒÙŠÙ Ø§Ù„Ø­Ø§Ù„' => [
            "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø¨Ø®ÙŠØ±! Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ ğŸ˜Š\nØ´Ù„ÙˆÙ†Ùƒ Ø£Ù†ØªØŸ",
            "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ø£Ù†Ø§ Ø¨Ø®ÙŠØ±! Ø´ÙƒØ±Ø§Ù‹ ğŸ˜Š\nÙƒÙŠÙÙƒ Ø£Ù†ØªØŸ",
        ],
        'Ø´Ù„ÙˆÙ†Ùƒ' => [
            "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø¨Ø®ÙŠØ±! Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ ğŸ˜Š\nØ´Ù„ÙˆÙ†Ùƒ Ø£Ù†ØªØŸ",
            "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ø£Ù†Ø§ Ø¨Ø®ÙŠØ±! Ø´ÙƒØ±Ø§Ù‹ ğŸ˜Š\nÙƒÙŠÙÙƒ Ø£Ù†ØªØŸ",
        ],
        // Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„ÙˆÙ‚Øª
        'Ø´Ù†Ùˆ Ø§Ù„ÙˆÙ‚Øª' => [
            "Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ: " . date('H:i') . " ğŸ•",
            "Ø§Ù„Ø³Ø§Ø¹Ø©: " . date('H:i') . " ğŸ•",
        ],
        'Ø´Ù†Ùˆ Ø§Ù„ØªØ§Ø±ÙŠØ®' => [
            "Ø§Ù„ØªØ§Ø±ÙŠØ®: " . date('Y-m-d') . " ğŸ“…",
            "Ø§Ù„ÙŠÙˆÙ…: " . date('Y-m-d') . " ğŸ“…",
        ],
        // Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„ÙŠÙˆÙ…
        'Ø´Ù†Ùˆ Ø§Ù„ÙŠÙˆÙ…' => [
            "Ø§Ù„ÙŠÙˆÙ…: " . date('l') . " ğŸ“…",
            "Ø§Ù„ÙŠÙˆÙ…: " . date('l') . " ğŸ“…",
        ],
        // Ø±Ø¯ÙˆØ¯ Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©
        'ØªÙ…Ø§Ù…' => [
            "Ù…Ù…ØªØ§Ø²! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ Ø¨Ø¹Ø¯ØŸ",
            "Ø­Ù„Ùˆ! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ",
            "Ø²ÙŠÙ†! ğŸ˜Š\nØ´Ù†Ùˆ Ø¨Ø¹Ø¯ØŸ"
        ],
        'Ø­Ù„Ùˆ' => [
            "Ø´ÙƒØ±Ø§Ù‹! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "Ø§Ù„Ù„Ù‡ ÙŠØ¹Ø·ÙŠÙƒ Ø§Ù„Ø¹Ø§ÙÙŠØ©! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        // Ø±Ø¯ÙˆØ¯ Ø³Ù„Ø¨ÙŠØ©
        'Ù…Ø´ Ø­Ù„Ùˆ' => [
            "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø´Ù†Ùˆ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø£Ø³Ø§Ø¹Ø¯Ùƒ ğŸ˜Š",
            "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø´Ù†Ùˆ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ğŸ˜Š"
        ],
        'Ù…Ø´ ØªÙ…Ø§Ù…' => [
            "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø´Ù†Ùˆ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø£Ø³Ø§Ø¹Ø¯Ùƒ ğŸ˜Š",
            "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø´Ù†Ùˆ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ğŸ˜Š"
        ],
        // Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ø·Ù‚Ø³
        'Ø§Ù„Ø·Ù‚Ø³' => [
            "Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø£Ù†Ø§ Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù† Ø§Ù„Ø·Ù‚Ø³ØŒ Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ ØªØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù‡Ø§ØªÙÙƒ! ğŸŒ¤ï¸\n\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ Ø¨Ø¹Ø¯ØŸ",
            "Ù„Ù„Ø£Ø³Ù Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø·Ù‚Ø³ Ø­Ø§Ù„ÙŠØ§Ù‹. Ø¬Ø±Ø¨ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù‡Ø§ØªÙÙƒ! ğŸŒ¤ï¸\n\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'Ø´Ù„ÙˆÙ† Ø§Ù„Ø·Ù‚Ø³' => [
            "Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø£Ù†Ø§ Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù† Ø§Ù„Ø·Ù‚Ø³ØŒ Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ ØªØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù‡Ø§ØªÙÙƒ! ğŸŒ¤ï¸\n\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ Ø¨Ø¹Ø¯ØŸ",
            "Ù„Ù„Ø£Ø³Ù Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø·Ù‚Ø³ Ø­Ø§Ù„ÙŠØ§Ù‹. Ø¬Ø±Ø¨ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù‡Ø§ØªÙÙƒ! ğŸŒ¤ï¸\n\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'ÙƒÙŠÙ Ø§Ù„Ø·Ù‚Ø³' => [
            "Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø£Ù†Ø§ Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù† Ø§Ù„Ø·Ù‚Ø³ØŒ Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ ØªØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù‡Ø§ØªÙÙƒ! ğŸŒ¤ï¸\n\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ Ø¨Ø¹Ø¯ØŸ",
            "Ù„Ù„Ø£Ø³Ù Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø·Ù‚Ø³ Ø­Ø§Ù„ÙŠØ§Ù‹. Ø¬Ø±Ø¨ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù‡Ø§ØªÙÙƒ! ğŸŒ¤ï¸\n\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        // Ø±Ø¯ÙˆØ¯ Ø¹Ù„Ù‰ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¹Ø§Ù…Ø©
        'Ù…ØªØ¹Ø¨' => [
            "ÙÙ‡Ù…ØªÙƒ Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø§Ù„Ø¹Ù…Ù„ Ù…ØªØ¹Ø¨ Ø£Ø­ÙŠØ§Ù†Ø§Ù‹. ØªØ°ÙƒØ±: ÙƒÙ„ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ ÙŠØ¹Ù†ÙŠ ÙØ±ØµØ© Ø¬Ø¯ÙŠØ¯Ø©! ğŸ’ª\n\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "ÙÙ‡Ù…ØªÙƒØŒ Ø§Ù„Ø¹Ù…Ù„ Ù…ØªØ¹Ø¨. Ø®Ø° Ø§Ø³ØªØ±Ø§Ø­Ø© Ù‚ØµÙŠØ±Ø© Ø¥Ø°Ø§ ØªÙ‚Ø¯Ø±! â˜•\n\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'ØªØ¹Ø¨Ø§Ù†' => [
            "ÙÙ‡Ù…ØªÙƒ Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø§Ù„Ø¹Ù…Ù„ Ù…ØªØ¹Ø¨ Ø£Ø­ÙŠØ§Ù†Ø§Ù‹. ØªØ°ÙƒØ±: ÙƒÙ„ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ ÙŠØ¹Ù†ÙŠ ÙØ±ØµØ© Ø¬Ø¯ÙŠØ¯Ø©! ğŸ’ª\n\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "ÙÙ‡Ù…ØªÙƒØŒ Ø§Ù„Ø¹Ù…Ù„ Ù…ØªØ¹Ø¨. Ø®Ø° Ø§Ø³ØªØ±Ø§Ø­Ø© Ù‚ØµÙŠØ±Ø© Ø¥Ø°Ø§ ØªÙ‚Ø¯Ø±! â˜•\n\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'Ù…Ø´ØºÙˆÙ„' => [
            "ÙÙ‡Ù…ØªÙƒ Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ù†Ø§ Ù‡Ù†Ø§! ğŸ˜Š\n\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "ÙÙ‡Ù…ØªÙƒØŒ Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª Ø£ÙŠ Ø´ÙŠØ¡ Ø£Ù†Ø§ Ù…ÙˆØ¬ÙˆØ¯! ğŸ˜Š\n\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'Ø²ÙŠÙ†' => [
            "Ù…Ù…ØªØ§Ø²! Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ ğŸ˜Š\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ Ø¨Ø¹Ø¯ØŸ",
            "Ø²ÙŠÙ†! Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        // Ø±Ø¯ÙˆØ¯ Ø¹Ù„Ù‰ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©
        'Ø­Ù„Ùˆ' => [
            "Ø´ÙƒØ±Ø§Ù‹! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "Ø§Ù„Ù„Ù‡ ÙŠØ¹Ø·ÙŠÙƒ Ø§Ù„Ø¹Ø§ÙÙŠØ©! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'Ù…Ù…ØªØ§Ø²' => [
            "Ø´ÙƒØ±Ø§Ù‹! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ Ø¨Ø¹Ø¯ØŸ",
            "Ø§Ù„Ù„Ù‡ ÙŠØ¹Ø·ÙŠÙƒ Ø§Ù„Ø¹Ø§ÙÙŠØ©! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        // Ø±Ø¯ÙˆØ¯ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø¹Ø§Ù…Ø© Ø£Ø®Ø±Ù‰
        'Ø´Ù†Ùˆ Ø§Ø³Ù…Ùƒ' => [
            "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ HR! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ HR ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'Ù…Ù† Ø§Ù†Øª' => [
            "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ HR ÙÙŠ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ HR! Ø£Ù‚Ø¯Ø± Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø±Ø§ØªØ¨ØŒ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§ØªØŒ ÙˆØ§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
        'Ø´Ù†Ùˆ ØªÙ‚Ø¯Ø±' => [
            "Ø£Ù†Ø§ Ø£Ù‚Ø¯Ø± Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ:\nğŸ’° Ø§Ù„Ø±Ø§ØªØ¨\nğŸ“… Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª\nâœ… Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©\nğŸ’ª Ø±Ø³Ø§Ø¦Ù„ ØªØ­ÙÙŠØ²ÙŠØ©\nğŸ˜„ Ù†ÙƒØªØ©\n\nØ´Ù†Ùˆ ØªØ­ØªØ§Ø¬ØŸ",
            "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ HR! Ø£Ù‚Ø¯Ø± Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø±Ø§ØªØ¨ØŒ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§ØªØŒ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ Ø£Ùˆ Ø­ØªÙ‰ Ù†ÙƒØªØ©! ğŸ˜Š\nØ´Ù†Ùˆ ØªØ±ÙŠØ¯ØŸ"
        ],
    ];
    
    foreach ($small_talk_responses as $keyword => $responses) {
        if (mb_strpos($message_lower, $keyword) !== false) {
            return $responses[array_rand($responses)];
        }
    }
    
    return null;
}

